(function(e){"use strict";var t=e.jsonpClient,n=typeof module!="undefined"&&module.exports,r,i,s=function(){var e=Array.prototype.slice.apply(arguments),t,n=e.slice(0,-1),r=0,s,o=[],u,a;try{t=e.slice(-1)[0];if(typeof t!="function")throw new Error("Callback not found")}catch(f){throw new Error("jsonpClient expects a callback")}typeof n[0]!="string"&&(n=n[0]),a=function(){var e=0;o=o.sort(function(e,t){return e.position>t.position});for(e=0;o.length>e;e+=1)o[e]=o[e].data;o.unshift(null),t.apply(null,o)},u=function(e,u){i(n[r],function(e,r){if(s)return;s=e;if(e)return t(e);o.push({data:r,position:u}),o.length===n.length&&a()})};for(r=0;n.length>r;r+=1)u(n[r]+"",r)};s.noConflict=function(){return e.jsonpClient=t,s},r=function(){var t,n,r=document.getElementsByTagName("head")[0];return n=function(e,t){var n=document.createElement("script"),i=!1;n.src=e,n.async=!0,n.onload=n.onreadystatechange=function(){!i&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(i=!0,n.onload=n.onreadystatechange=null,n&&n.parentNode&&n.parentNode.removeChild(n),t())},r.appendChild(n)},t=function(e,t){var n=e.match(/\?callback=([a-z0-9_]+)/i);if(!n)return t(new Error("Could not find callback on URL"));t(null,n[1])},function(r,i){t(r,function(t,s){var o;if(t)return i(t);e[s]=function(e){o=e},n(r,function(t){if(t)return i(t);delete e[s],i(null,o)})})}},i=n?require("./jsonp-node.js"):r(),n?module.exports=s:e.jsonpClient=s})(this);